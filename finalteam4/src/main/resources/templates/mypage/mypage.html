<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/assets/css/style.css">
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></script>
<style>
* {
	font-family: Pretendard;
}
/*사이드바  */
/* Sidebar styling */
.sidebar-nav {
	padding: 0;
	list-style: none;
	transition: all .5s;
	width: 100%;
	text-align: center;
}

.sidebar-nav li {
	line-height: 40px;
	width: 100%;
	transition: all .3s;
	padding: 10px;
}

.sidebar-nav li a {
	display: block;
	text-decoration: none;
	color: #5d5d5d;
}

.sidebar-nav li a:hover {
	color: #000;
}

#menu-toggle {
	transition: all .3s;
	font-size: 20px;
}
/* Change the width of the sidebar to display it*/
#wrapper.menuDisplayed #sidebar-wrapper {
	width: 250px;
}
/* 컨텐츠   */
#page-content-wrapper {
	width: 100%;
	padding: 15px;
	transition: all 1.5s;
}
/* 배너 */
.card2 {
	background-color: #ffffff;
	border-radius: 30px;
	background: url("/img/caption.jpg") no-repeat;
	background-size: cover;
	background-position: center;
	margin-top: 30px;
}

#heading {
	font-size: 55px;
	color: #fff;
}

.temp {
	place-items: center;
}

.temp-details>p>span, .grey {
	color: #fff;
	font-size: 18px;
}

.fa {
	color: #fff
}

*:focus {
	outline: none;
}
/* 등급 */
.badge {
	font-size: 25px;
	font-weight: 700;
}

.badge i {
	font-size: 20px;
	font-weight: 200;
}

.about-rating {
	font-size: 15px;
	font-weight: 500;
	margin-top: 10px;
}

.total-ratings {
	font-size: 12px;
}

.bg-custom {
	background-color: #b7dd29 !important;
}

.progress {
	margin-top: 40px;
}

/*쿠폰  */
.card3 {
	width: 280px;
	border: none;
	height: 280px;
	border-radius: 15px;
	padding: 20px;
	background-color: #D50000;
	margin-top: 30px;
	margin-bottom: 30px;
	margin-left:auto;
margin-right:auto;
}

.flex_container{
flex-direction:row;
justify-content:space-between;
align-items:baseline;


}
.percent {
	font-size: 56px;
	color: #fff;
}

.discount {
	font-size: 27px;
	color: #fff;
}

.line {
	color: #fff;
}

.form-check-input:checked {
	background-color: #F44336;
	border-color: #F44336;
}

.form-check-input:focus {
	border-color: #d50000;
	outline: 0;
	box-shadow: none;
}

.form-check {
	display: block;
	min-height: 1.5rem;
	padding-left: 1.75em;
	margin-bottom: -5px;
}
</style>
<script>
$(document).ready(function() {
	/* const menu = document.querySelector('#menu-toggle') */
	$("#menu-toggle").click(function(e) {
		e.preventDefault();
		$("#wrapper").toggleClass("menuDisplayed");
		/* menu.style.visibility = "hidden"; */
	});
});
	function addcoupon(input) {
		var form = $(input).serialize();
		console.log(input);
		console.log(form);

		$.ajax({
			url : "/mypage/addcoupon",
			type : "GET",
			data : form,
			success : function(date) {
				alert("쿠폰발급이 완료되었습니다.");
			}
		});
	}


</script>


</head>


<body>
	<!-- Sidebar -->
	<div id="wrpper">
	<div id="sidebar-wrapper">
	<a href="#" class="btn" id="menu-toggle"></a>
		<ul class="sidebar-nav">
			<h2 style="margin: 30px 0 20px"
					th:text="${session.logincust.custname}+' 님'"></h2>
			<h4 href="#">나의 EAT & OUT 정보</h4>
			<li><a
				th:href="@{/mypage/order(id=${session.logincust.custid})}">테이블
					조회</a></li>
			<li><a
				th:href="@{/mypage/review(id=${session.logincust.custid})}">나의
					리뷰</a></li>
			<li><a th:href="@{/wishlist(id=${session.logincust.custid})}">나의
					위시리스트</a></li>
			<h4>나의 계정설정</h4>
			<li><a th:href="@{/mypage/edit(id=${session.logincust.custid})}">회원정보수정</a></li>
			<li><a href="#">회원등급</a></li>
			<li><a href="#">쿠폰</a></li>
			<h4>고객센터</h4>
			<li><a th:href="@{/mypage/question}">1:1 문의내역</a></li>
			<li><a href="#">공지사항</a></li>
			<li><a href="#">FAQ</a></li>
		</ul>
	</div>
	<div id="page-content-wrapper">
	<a href="#" class="btn" id="menu-toggle"><span
			class="glyphicon glyphicon-menu-hamburger">></span></a>
	<!-- 배너 -->
	<div class="container-fluid">
	
		<div class="row justify-content-center">
			<div class="col-12 col-md-4 col-sm-12 col-xs-12">
				<div class="card2 p-4">
					<div class="d-flex">
						<h6 class="flex-grow-1" style="color: #fff;"
							th:text="'😀'+${session.logincust.custname}+'님의가까운예약'"></h6>
						<h6></h6>
					</div>
					<div class="d-flex flex-column temp mt-5 mb-3"
						th:with="list1 = ${session.list_one}">
						<h3 class="mb-0 font-weight-bold" id="heading"
							th:text="${list1.storename}"></h3>
					</div>
					<div class="d-flex" th:with="list1 = ${session.list_one}">
						<div class="temp-details flex-grow-1">
							<p class="my-1" th:text="'D' + ${session.banner_dday}"
								style="color: #fff; font-size:15px;">
								<span th:text="${session.banner_rsvdate}" style="color: #fff; font-size:45px;"></span>
							</p>
							<p class="my-1">
							<span th:text="'예약날짜:'+${list1.reservedate}" style="color: #fff;"> </span>
							</p>
						</div>
						<div></div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- 배너 끝 -->

	<!--등급  -->
	<div class="container mt-5">
		<h6 class="m-b-20 p-b-5 b-b-default f-w-600">Member level</h6>

		<div class="card">
			<div class="row no-gutters">
				<div class="col-md-4 border-right">
					<div class="ratings text-center p-4 py-5">
						<span class="badge bg-success">내등급 <i class="fa fa-star-o"></i></span>
						<h1 th:if="${session.logincust.lv} == 'orange'"
							class="mb-0 font-weight-bold" id="heading"
							th:style="${'color: orange'}" th:text="${session.logincust.lv}"></h1>
						<span class="small grey">구매금액</span> <span class="small grey"
							th:text="${totalpay} + '원'"></span>
					</div>
				</div>
				<div class="col-md-8">
					<div class="rating-progress-bars p-3">
						<div class="progress-1 align-items-center">
							<h6>다음 레벨까지</h6>
							<p th:if="${session.logincust.lv} == 'green'"
								class="font-italic text-muted"
								style="padding: 5px; margin-left: 75%">10만원</p>
							<p th:if="${session.logincust.lv} == 'yellow'"
								class="font-italic text-muted"
								style="padding: 5px; margin-left: 75%">30만원</p>
							<p th:if="${session.logincust.lv} == 'orange'"
								class="font-italic text-muted"
								style="padding: 5px; margin-left: 75%">50만원</p>
							<div th:if="${session.logincust.lv} == 'green'"
								class="progress rounded-pill">
								<div id="progressbar" role="progressbar" aria-valuenow="55"
									aria-valuemin="0" aria-valuemax="100"
									class="progress-bar rounded-pill"
									th:style="|width: ${#numbers.formatDecimal(totalpay / 100000.0 * 100.0, 2, 1)}%; background-color: #00c2fe;|"
									th:text="${#numbers.formatDecimal(totalpay / 100000.0 * 100.0, 2, 1)} + '%'"></div>
							</div>
							<div th:if="${session.logincust.lv} == 'yellow'"
								class="progress rounded-pill">
								<div id="progressbar" role="progressbar" aria-valuenow="55"
									aria-valuemin="0" aria-valuemax="100"
									class="progress-bar rounded-pill"
									th:style="|width: ${#numbers.formatDecimal(totalpay / 300000.0 * 100.0, 2, 1)}%; background-color: #00c2fe;|"
									th:text="${#numbers.formatDecimal(totalpay / 300000.0 * 100.0, 2, 1)} + '%'"></div>
							</div>
							<div th:if="${session.logincust.lv} == 'orange'"
								class="progress rounded-pill">
								<div id="progressbar" role="progressbar" aria-valuenow="55"
									aria-valuemin="0" aria-valuemax="100"
									class="progress-bar rounded-pill"
									th:style="|width: ${#numbers.formatDecimal(totalpay / 500000.0 * 100.0, 2, 1)}%; background-color: #00c2fe;|"
									th:text="${#numbers.formatDecimal(totalpay / 500000.0 * 100.0, 2, 1)} + '%'"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- 등급 끝 -->
	<!-- 쿠폰  -->
	<div class="flex_container">
	<div class="row">
	<div class="card3" style="background: url('/img/white_noun.jpg');">
		<div class="text-center">
			<div class="d-flex flex-row text-center">
				<div class="d-flex flex-column ml-1">
					<h1>coming</h1>
					<h1>soon</h1>
				</div>
			</div>
		</div>
		<hr class="line">
		<span class="text-black">영수증 리뷰를 통한 Eat&Out 회원만의 혜택을 누려보세요</span>
	</div>
	
	<!-- 만원할인  -->
	<div class="card3" style="background: url('/img/aewol.jpeg');">
		<div class="text-center">
			<div class="d-flex flex-row">
				<div class="d-flex flex-column ml-1">
					<form id="levelup" onclick="addcoupon(this)">
										<h1 style="color: #fff;">Level Up</h1>
										<h4 style="color: #fff;">Coupon</h4>
										<div class="mt">
											<input type="hidden" name="custid"
												th:value="${session.logincust.custid}"> <input
												type="hidden" name="couponname" value="level up"> <input
												type="hidden" name="discount" value="10000"> <input
												type="hidden" name="used" value="false"> 
										</div>
									</form>
				</div>
			</div>
		</div>
		<hr class="line">
		
	 <span class="d-block">1만원 할인</span><span class="d-block">-10000</span>
	 <small>With
												Code : eatnout127</small>
	</div>
	<!-- 오렌지  -->
	<div class="card3" th:if="${session.logincust.lv == 'orange'}"
								style="background: url('/img/orange.jpg');">
		<div class="text-center">
			<div class="d-flex flex-row">
				<div class="d-flex flex-column ml-1">
					<form id="orange" onclick="addcoupon(this)">
									<h1 style="color: #fff; text-align:center;">Orange</h1>
									<h4 style="color: #fff;">Coupon</h4>
									<div class="mt">
										<input type="hidden" name="custid"
											th:value="${session.logincust.custid}"> <input
											type="hidden" name="couponname" value="Orange"> <input
											type="hidden" name="discount" value="20000"> <input
											type="hidden" name="used" value="false"> 
									</div>
								</form>
				</div>
			</div>
		</div>
		<hr class="line">
		<span class="d-block" style="color:#fff">2만원 할인</span><span class="d-block" style="color:#fff">-20000</span>
		<small style="color:#fff">With
											Code : orangeLV</small>
	</div>
	<div class="card3" style="background: url('/img/coupon.jpg');">
		<div class="text-center">
			<div class="d-flex flex-row text-center">
				<div class="d-flex flex-column ml-1">
					<form id="holiday" onclick="addcoupon(this)">
										<h1 style="color: #D5D5D5">Holiday</h1>
										<h4 style="color: #D5D5D5">Coupon</h4>
										
										<div class="mt">
											<input type="hidden" name="custid"
												th:value="${session.logincust.custid}"> <input
												type="hidden" name="couponname" value="Holiday"> <input
												type="hidden" name="discount" value="5000"> <input
												type="hidden" name="used" value="false"> 
									</form>
				</div>
			</div>
		</div>
		<hr class="line">
			<span class="d-block">5천원 할인</span><span class="d-block">-5000</span>
		<span>With
												Code : holiday5000</span>
	</div>
	</div>
	</div>
	</div>
	</div>
</body>
</html>