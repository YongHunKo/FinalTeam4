<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/assets/css/style.css">
<link
	href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"
	rel="stylesheet">
<link
	href='https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900'
	rel='stylesheet' type='text/css'>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<script type="text/css"
	src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></script>
<style>
* {
	font-family: Pretendard;
}

/* 상단 내비 */

/* 배너 */
.card2 {
	background-color: #ffffff;
	border-radius: 30px;
	background: url("/img/caption.jpg") no-repeat;
	background-size: cover;
	background-position: center;
	margin-top: 30px;
}

#heading {
	font-size: 55px;
	color: #fff;
}

.temp {
	place-items: center;
}

.temp-details>p>span, .grey {
	color: #fff;
	font-size: 18px;
}

.fa {
	color: #fff
}

*:focus {
	outline: none;
}
/* 등급 */
.badge {
	font-size: 25px;
	font-weight: 700;
}

.badge i {
	font-size: 20px;
	font-weight: 200;
}

.about-rating {
	font-size: 15px;
	font-weight: 500;
	margin-top: 10px;
}

.total-ratings {
	font-size: 12px;
}

.bg-custom {
	background-color: #b7dd29 !important;
}

.progress {
	margin-top: 40px;
}

/*쿠폰  */
.card3 {
	width: 280px;
	border: none;
	height: 280px;
	border-radius: 15px;
	padding: 20px;
	background-color: #D50000;
	margin-top: 30px;
	margin-bottom: 30px;
	margin-left: auto;
	margin-right: auto;
}

.flex_container {
	flex-direction: row;
	justify-content: space-between;
	align-items: baseline;
}

.percent {
	font-size: 56px;
	color: #fff;
}

.discount {
	font-size: 27px;
	color: #fff;
}

.line {
	color: #fff;
}

.form-check-input:checked {
	background-color: skyblue;
	border-color: skyblue;
}

.form-check-input:focus {
	border-color: skyblue;
	outline: 0;
	box-shadow: none;
}

.form-check {
	display: block;
	min-height: 1.5rem;
	padding-left: 1.75em;
	margin-bottom: -5px;
}

/* 메뉴바 */
.nav-item {
	position: relative;
	padding-right: 50px;
}

.navbar-collapse ul li a.nav-link:before {
	position: absolute;
	bottom: -5px;
	left: 0;
	width: 100%;
	height: 2px;
	background: transparent;
	content: '';
	opacity: 0;
	-ms-transition: opacity 0.3s, -webkit-transform 0.3s;
	-webkit-transition: opacity 0.3s, -webkit-transform 0.3s;
	transition: opacity 0.3s, transform 0.3s;
	-ms-transform: translateY(10px);
	-webkit-transform: translateY(10px);
	transform: translateY(10px);
}

.navbar-collapse ul li:hover a.nav-link:before {
	opacity: 1;
	-ms-transform: translateY(0px);
	-webkit-transform: translateY(0px);
	transform: translateY(0px);
	bottom: 0px;
	background: skyblue;
}

.dropdown-item:hover, .dropdown-item:focus {
	color: #ffffff;
	text-decoration: none;
	background-color: skyblue;
}

.dropdown-menu {
	border: 0px;
}
</style>
<script>
	$(document).ready(function() {
		$('#navbarDropdown').click(function() {
			$('.dropdown-menu').slideToggle(300, "linear");
		});

		$('.dropdown-menu').click(function() {
			$(this).slideToggle(300, "linear");
		});
	});
	function addcoupon(input) {
		var form = $(input).serialize();

		$.ajax({
			url : "/mypage/addcoupon",
			type : "GET",
			data : form,
			success : function(date) {
				alert("쿠폰발급이 완료되었습니다.");
			}
		});
	}
</script>


</head>


<body>
	<!-- 메뉴바 -->
	<nav class="navbar navbar-expand-lg navbar-light bg-light"
		style="justify-content: center;">
		<button class="navbar-toggler" type="button" data-toggle="collapse"
			data-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent" aria-expanded="false"
			aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item dropdown"><a
					class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
					role="button" data-toggle="dropdown" aria-haspopup="true"
					aria-expanded="false">나의 EAT & OUT</a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						<a class="dropdown-item"
							th:href="@{/mypage/order(id=${session.logincust.custid})}">테이블
							조회</a> <a class="dropdown-item"
							th:href="@{/mypage/review(id=${session.logincust.custid})}">나의
							리뷰</a> <a class="dropdown-item"
							th:href="@{/wishlist(id=${session.logincust.custid})}">나의
							위시리스트</a>
					</div></li>
				<li class="nav-item dropdown"><a
					class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
					role="button" data-toggle="dropdown" aria-haspopup="true"
					aria-expanded="false"> 계정설정 </a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						<a class="dropdown-item"
							th:href="@{/mypage/edit(id=${session.logincust.custid})}">회원정보수정</a>
						<a class="dropdown-item" href="#">쿠폰</a>
					</div></li>
				<li class="nav-item dropdown"><a
					class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
					role="button" data-toggle="dropdown" aria-haspopup="true"
					aria-expanded="false">고객센터</a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						<a class="dropdown-item" th:href="@{/mypage/question}">1:1
							문의내역</a> <a class="dropdown-item" href="#">공지사항</a> <a
							class="dropdown-item" href="#">FAQ</a>
					</div></li>
			</ul>
		</div>
	</nav>
	<!-- 메뉴바 끝 -->

	<!-- 배너 -->
	<div class="container-fluid">

		<div class="row justify-content-center">
			<div class="col-12 col-md-4 col-sm-12 col-xs-12">
				<div class="card2 p-4">
					<div class="d-flex">
						<h6 class="flex-grow-1" style="color: #fff;"
							th:text="'😀'+${session.logincust.custname}+'님의 가까운 예약'"></h6>
						<h6></h6>
					</div>
					<div class="d-flex flex-column temp mt-5 mb-3"
						th:with="list1 = ${session.list_one}">
						<h3 class="mb-0 font-weight-bold" id="heading"
							th:text="${list1.storename}"></h3>
					</div>
					<div class="d-flex" th:with="list1 = ${session.list_one}">
						<div class="temp-details flex-grow-1">
							<p class="my-1" th:text="'D' + ${session.banner_dday}"
								style="color: #fff; font-size: 15px;">
								<span th:text="${session.banner_rsvdate}"
									style="color: #fff; font-size: 45px;"></span>
							</p>
							<p class="my-1">
								<span th:text="'예약날짜 : '+${list1.reservedate}"
									style="color: #fff;"> </span>
							</p>
						</div>
						<div></div>
					</div>
				</div>
			</div>
		</div>


		<!-- 배너 끝 -->

		<!--등급  -->
		<div class="container mt-5">
			<h6 class="m-b-20 p-b-5 b-b-default f-w-600">Member level</h6>

			<div class="card">
				<div class="row no-gutters">
					<div class="col-md-4 border-right">
						<div class="ratings text-center p-4 py-5">
							<span class="badge bg-success">내등급<i class="fa fa-star-o"></i></span>
							<h1 th:if="${session.logincust.lv} == 'orange'"
								class="mb-0 font-weight-bold" id="heading"
								th:style="${'color: orange'}" th:text="${session.logincust.lv}"></h1>
							<span class="small grey">구매금액</span> <span class="small grey"
								th:text="${totalpay} + '원'"></span>
						</div>
					</div>
					<div class="col-md-8">
						<div class="rating-progress-bars p-3">
							<div class="progress-1 align-items-center">
								<h6>다음 레벨까지</h6>
								<p th:if="${session.logincust.lv} == 'green'"
									class="font-italic text-muted"
									style="padding: 5px; margin-left: 75%">10만원</p>
								<p th:if="${session.logincust.lv} == 'yellow'"
									class="font-italic text-muted"
									style="padding: 5px; margin-left: 75%">30만원</p>
								<p th:if="${session.logincust.lv} == 'orange'"
									class="font-italic text-muted"
									style="padding: 5px; margin-left: 75%">50만원</p>
								<div th:if="${session.logincust.lv} == 'green'"
									class="progress rounded-pill">
									<div id="progressbar" role="progressbar" aria-valuenow="55"
										aria-valuemin="0" aria-valuemax="100"
										class="progress-bar rounded-pill"
										th:style="|width: ${#numbers.formatDecimal(totalpay / 100000.0 * 100.0, 2, 1)}%; background-color: #00c2fe;|"
										th:text="${#numbers.formatDecimal(totalpay / 100000.0 * 100.0, 2, 1)} + '%'"></div>
								</div>
								<div th:if="${session.logincust.lv} == 'yellow'"
									class="progress rounded-pill">
									<div id="progressbar" role="progressbar" aria-valuenow="55"
										aria-valuemin="0" aria-valuemax="100"
										class="progress-bar rounded-pill"
										th:style="|width: ${#numbers.formatDecimal(totalpay / 300000.0 * 100.0, 2, 1)}%; background-color: #00c2fe;|"
										th:text="${#numbers.formatDecimal(totalpay / 300000.0 * 100.0, 2, 1)} + '%'"></div>
								</div>
								<div th:if="${session.logincust.lv} == 'orange'"
									class="progress rounded-pill">
									<div id="progressbar" role="progressbar" aria-valuenow="55"
										aria-valuemin="0" aria-valuemax="100"
										class="progress-bar rounded-pill"
										th:style="|width: ${#numbers.formatDecimal(totalpay / 500000.0 * 100.0, 2, 1)}%; background-color: #00c2fe;|"
										th:text="${#numbers.formatDecimal(totalpay / 500000.0 * 100.0, 2, 1)} + '%'"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- 등급 끝 -->
		<!-- 쿠폰  -->
		<div class="flex_container">
			<div class="row">
				<div class="card3" style="background: url('/img/white_noun.jpg');">
					<div class="text-center">
						<div class="d-flex flex-row text-center">
							<div class="d-flex flex-column ml-1">
								<h1>coming</h1>
								<h1>soon</h1>
							</div>
						</div>
					</div>
					<hr class="line">
					<span class="text-black">영수증 리뷰를 통한 Eat&Out 회원만의 혜택을 누려보세요</span>
				</div>

				<!-- 만원할인  -->
				<div class="card3" style="background: url('/img/aewol.jpeg');">
					<div class="text-center">
						<div class="d-flex flex-row">
							<div class="d-flex flex-column ml-1">
								<form id="levelup" onclick="addcoupon(this)">
									<h1 style="color: #fff;">Level Up</h1>
									<h4 style="color: #fff;">Coupon</h4>
									<div class="mt">
										<input type="hidden" name="custid"
											th:value="${session.logincust.custid}"> <input
											type="hidden" name="couponname" value="level up"> <input
											type="hidden" name="discount" value="10000"> <input
											type="hidden" name="used" value="false">
									</div>
								</form>
							</div>
						</div>
					</div>
					<hr class="line">

					<span class="d-block">1만원 할인</span><span class="d-block">-10000</span>
					<small>With Code : eatnout127</small>
				</div>
				<!-- 오렌지  -->
				<div class="card3" th:if="${session.logincust.lv == 'orange'}"
					style="background: url('/img/orange.jpg');">
					<div class="text-center">
						<div class="d-flex flex-row">
							<div class="d-flex flex-column ml-1">
								<form id="orange" onclick="addcoupon(this)">
									<h1 style="color: #fff; text-align: center;">Orange</h1>
									<h4 style="color: #fff;">Coupon</h4>
									<div class="mt">
										<input type="hidden" name="custid"
											th:value="${session.logincust.custid}"> <input
											type="hidden" name="couponname" value="Orange"> <input
											type="hidden" name="discount" value="20000"> <input
											type="hidden" name="used" value="false">
									</div>
								</form>
							</div>
						</div>
					</div>
					<hr class="line">
					<span class="d-block" style="color: #fff">2만원 할인</span><span
						class="d-block" style="color: #fff">-20000</span> <small
						style="color: #fff">With Code : orangeLV</small>
				</div>
				<div class="card3" style="background: url('/img/coupon.jpg');">
					<div class="text-center">
						<div class="d-flex flex-row text-center">
							<div class="d-flex flex-column ml-1">
								<form id="holiday" onclick="addcoupon(this)">
									<h1 style="color: #D5D5D5">Holiday</h1>
									<h4 style="color: #D5D5D5">Coupon</h4>

									<div class="mt">
										<input type="hidden" name="custid"
											th:value="${session.logincust.custid}"> <input
											type="hidden" name="couponname" value="Holiday"> <input
											type="hidden" name="discount" value="5000"> <input
											type="hidden" name="used" value="false">
								</form>
							</div>
						</div>
					</div>
					<hr class="line">
					<span class="d-block">5천원 할인</span><span class="d-block">-5000</span>
					<span>With Code : holiday5000</span>
				</div>
			</div>
		</div>
</body>
</html>