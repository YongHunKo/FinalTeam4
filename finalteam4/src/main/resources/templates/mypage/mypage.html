<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<meta charset="utf-8">

<head>
<link rel="stylesheet" th:href="@{/assets/css/common/styles.css}">

<style>
.m-r-0 {
	margin-right: 0px;
}

.m-l-0 {
	margin-left: 0px;
}

.user-card-full .user-profile {
	border-radius: 5px 0 0 5px;
}

.bg-c-lite-green {
	background: -webkit-gradient(linear, left top, right top, from(#f29263),
		to(#ee5a6f));
	background: linear-gradient(to right, #ee5a6f, #f29263);
}

.user-profile {
	padding: 20px 0;
}

.card-block {
	padding: 1.25rem;
}

.m-b-25 {
	margin-bottom: 25px;
}

.img-radius {
	border-radius: 5px;
}

h6 {
	font-size: 14px;
}

.card .card-block p {
	line-height: 25px;
}

@media only screen and (min-width: 1400px) {
	p {
		font-size: 14px;
	}
}

.card-block {
	padding: 1.25rem;
}

.b-b-default {
	border-bottom: 1px solid #e0e0e0;
}

.m-b-20 {
	margin-bottom: 20px;
}

.p-b-5 {
	padding-bottom: 5px !important;
}

.card .card-block p {
	line-height: 25px;
}

.m-b-10 {
	margin-bottom: 10px;
}

.text-muted {
	color: #919aa3 !important;
}

.b-b-default {
	border-bottom: 1px solid #e0e0e0;
}

.f-w-600 {
	font-weight: 600;
}

.m-b-20 {
	margin-bottom: 20px;
}

.m-t-40 {
	margin-top: 20px;
}

.p-b-5 {
	padding-bottom: 5px !important;
}

.m-b-10 {
	margin-bottom: 10px;
}

.m-t-40 {
	margin-top: 20px;
}

.user-card-full .social-link li {
	display: inline-block;
}

.user-card-full .social-link li a {
	font-size: 20px;
	margin: 0 10px 0 0;
	-webkit-transition: all 0.3s ease-in-out;
	transition: all 0.3s ease-in-out;
}

/* coupon */
.card2 {
	width: 220px;
	margin: 10px;
	padding: 10px;
	border-radius: 20px;
	background: orange;
	border: none;
	color: #fff;
	height: 220px;
	display: flex;
	position: relative;
	align-items: center;
	justify-content: center;
	flex-direction: column;
	cursor: pointer;
}

.card2 h1 {
	font-size: 25px;
	margin-bottom: 0px;
}

.card2 span {
	font-size: 15px;
}
</style>



<script>
	$(document).ready(function() {
		/* const menu = document.querySelector('#menu-toggle') */
		$("#menu-toggle").click(function(e) {
			e.preventDefault();
			$("#wrapper").toggleClass("menuDisplayed");
			/* menu.style.visibility = "hidden"; */
		});
	});

	function addcoupon(input) {
		var form = $(input).serialize();
		console.log(input);
		console.log(form);

		$.ajax({
			url : "/mypage/addcoupon",
			type : "GET",
			data : form,
			success : function(date) {
				alert("쿠폰발급이 완료되었습니다.");
			}
		});
	}
</script>

</head>

<body>
	<div id="wrapper">
		<th:block th:replace="mypage/fragment/sidebar :: sidebarFragment"></th:block>
		<th:block th:replace="mypage/fragment/banner :: bannerFragment"></th:block>
		<div id="page-content-wrapper">
			<div class="container-fluid px-1 px-md-4 py-2 mx-auto">
				<div class="row d-flex justify-content-center px-3">
					<h3 class="my_tit">마이페이지</h3>
				</div>
			</div>
			<div class="row m-l-0 m-r-0" style="float: left; width: 50%">
				<div class="col-sm-0">
					<div class="card-block">
						<h6 class="m-b-20 p-b-5 b-b-default f-w-600">Member level</h6>
						<div class="row">
							<h6>내 등급</h6>
							<h1 th:if="${session.logincust.lv} == 'orange'"
								class="mb-0 font-weight-bold" id="heading"
								th:style="${'color: orange'}" th:text="${session.logincust.lv}"></h1>
							<span class="small grey">구매금액</span> <span class="small grey"
								th:text="${totalpay} + '원'"></span>
						</div>
						<h6 class="m-b-20 m-t-40 p-b-5 b-b-default f-w-600">Member
							benefits</h6>
						<div class="row">
							<div class="card mb-4" style="background: none">
								<div class="card-body p-5">
									<h6>다음 레벨까지</h6>
									<p th:if="${session.logincust.lv} == 'green'"
										class="font-italic text-muted"
										style="padding: 5px; margin-left: 75%">10만원</p>
									<p th:if="${session.logincust.lv} == 'yellow'"
										class="font-italic text-muted"
										style="padding: 5px; margin-left: 75%">30만원</p>
									<p th:if="${session.logincust.lv} == 'orange'"
										class="font-italic text-muted"
										style="padding: 5px; margin-left: 75%">50만원</p>

									<!-- Labeled progress bar-->
									<div th:if="${session.logincust.lv} == 'green'"
										class="progress rounded-pill">
										<div id="progressbar" role="progressbar" aria-valuenow="55"
											aria-valuemin="0" aria-valuemax="100"
											class="progress-bar rounded-pill"
											th:style="|width: ${#numbers.formatDecimal(totalpay / 100000.0 * 100.0, 2, 1)}%; background-color: #00c2fe;|"
											th:text="${#numbers.formatDecimal(totalpay / 100000.0 * 100.0, 2, 1)} + '%'"></div>
									</div>
									<div th:if="${session.logincust.lv} == 'yellow'"
										class="progress rounded-pill">
										<div id="progressbar" role="progressbar" aria-valuenow="55"
											aria-valuemin="0" aria-valuemax="100"
											class="progress-bar rounded-pill"
											th:style="|width: ${#numbers.formatDecimal(totalpay / 300000.0 * 100.0, 2, 1)}%; background-color: #00c2fe;|"
											th:text="${#numbers.formatDecimal(totalpay / 300000.0 * 100.0, 2, 1)} + '%'"></div>
									</div>
									<div th:if="${session.logincust.lv} == 'orange'"
										class="progress rounded-pill">
										<div id="progressbar" role="progressbar" aria-valuenow="55"
											aria-valuemin="0" aria-valuemax="100"
											class="progress-bar rounded-pill"
											th:style="|width: ${#numbers.formatDecimal(totalpay / 500000.0 * 100.0, 2, 1)}%; background-color: #00c2fe;|"
											th:text="${#numbers.formatDecimal(totalpay / 500000.0 * 100.0, 2, 1)} + '%'"></div>
									</div>
									<span class="small grey">최근 6개월간의 이용내역</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row m-l-0 m-r-0" style="float: left; width: 50%">
				<div class="col-sm-0">
					<div class="card-block">
						<h6 class="m-b-20 p-b-5 b-b-default f-w-600">Coupon</h6>
						<div class="row">
							<div class="d-flex align-items-center container">
								<div class="d-flex card2 text-center"
									style="background: url('/img/white_noun.jpg');">
									<h1>coming</h1>
									<h1>soon</h1>
								</div>
								<div class="d-flex card2 text-center"
									style="background: url('/img/aewol.jpeg');">
									<form id="levelup" onclick="addcoupon(this)">
										<h1 style="color: #fff">Level Up</h1>
										<h4 style="color: #fff">Coupon</h4>
										<span class="d-block">1만원 할인</span><span class="d-block">-10000</span>
										<div class="mt">
											<input type="hidden" name="custid"
												th:value="${session.logincust.custid}"> <input
												type="hidden" name="couponname" value="level up"> <input
												type="hidden" name="discount" value="10000"> <input
												type="hidden" name="used" value="false"> <small>With
												Code : eatnout127</small>
										</div>
									</form>
								</div>
							</div>
							<div class="d-flex align-items-center container">
								<div class="d-flex card2 text-center"
									style="background: url('/img/coupon.jpg');">
									<form id="holiday" onclick="addcoupon(this)">
										<h1 style="color: #D5D5D5">Holiday</h1>
										<h4 style="color: #D5D5D5">Coupon</h4>
										<span class="d-block">5천원 할인</span><span class="d-block">-5000</span>
										<div class="mt">
											<input type="hidden" name="custid"
												th:value="${session.logincust.custid}"> <input
												type="hidden" name="couponname" value="Holiday"> <input
												type="hidden" name="discount" value="5000"> <input
												type="hidden" name="used" value="false"> <small>With
												Code : holiday5000</small>
									</form>
								</div>
							</div>
							<div class="d-flex card2 text-center"
								th:if="${session.logincust.lv == 'orange'}"
								style="background: url('/img/orange.jpg');">
								<form id="orange" onclick="addcoupon(this)">
									<h1 style="color: white">Orange</h1>
									<h4 style="color: white">Coupon</h4>
									<span class="d-block">2만원 할인</span><span class="d-block">-20000</span>
									<div class="mt">
										<input type="hidden" name="custid"
											th:value="${session.logincust.custid}"> <input
											type="hidden" name="couponname" value="Orange"> <input
											type="hidden" name="discount" value="20000"> <input
											type="hidden" name="used" value="false"> <small>With
											Code : orangeLV</small>
									</div>
								</form>
							</div>
							<div class="d-flex card2 text-center"
								th:if="${session.logincust.lv == 'yellow'}"
								style="background: url('/img/yellow.jpeg');">
								<form id="yellow" onclick="addcoupon(this)">
									<h1 style="color: white">Yellow</h1>
									<h4 style="color: white">Coupon</h4>
									<span class="d-block">1.5만원 할인</span><span class="d-block">-15000</span>
									<div class="mt">
										<input type="hidden" name="custid"
											th:value="${session.logincust.custid}"> <input
											type="hidden" name="couponname" value="Yellow"> <input
											type="hidden" name="discount" value="15000"> <input
											type="hidden" name="used" value="false"> <small>With
											Code : yellowLV</small>
									</div>
								</form>
							</div>
							<div class="d-flex card2 text-center"
								th:if="${session.logincust.lv == 'green'}"
								style="background: url('/img/green.png');">
								<form id="green" onclick="addcoupon(this)">
									<h1 style="color: white">Green</h1>
									<h4 style="color: white">Coupon</h4>
									<span class="d-block">1만원 할인</span><span class="d-block">-10000</span>
									<div class="mt">
										<input type="hidden" name="custid"
											th:value="${session.logincust.custid}"> <input
											type="hidden" name="couponname" value="Green"> <input
											type="hidden" name="discount" value="10000"> <input
											type="hidden" name="used" value="false"> <small>With
											Code : greenLV</small>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>
